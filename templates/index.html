{% extends "layout.html" %}
{% block content %}

<div class="alert alert-danger" role="alert">
  Alerta: Todo contenido referente a algún estudiante o profesor será eliminado. También si es contenido pornográfico.
</div>

<section class="Botones-grip">
  <button id="Columna" onclick="column()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path fill-rule="evenodd" d="M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
  </svg>
  </button>
<button id="wrap" onclick="wrap()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="size-6">
    <path fillRule="evenodd" d="M3 6a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3V6ZM3 15.75a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2.25Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3v-2.25Z" clipRule="evenodd" />
  </svg>
  </button>
</section>

<section class="List-Files" id="List-Files">
  {% for File in File %}
  <div class="File">
    {% if File.tipo in ["jpg", "jpeg", "png", "gif"] %}
    <picture>
      <img class="Icono_Documento" src="{{ File.ruta }}" alt="{{ File.nombre }}" width="150" loading="lazy" />
    </picture>
    {% elif File.tipo == "mp4" %}
    <picture>
      <video id="my-video" class="video-js" width="auto" height="auto" controls>
        <source src="{{ File.ruta }}" type="video/mp4">
      </video>
    </picture>
    {% endif %}
    <span class="Texto">{{ File.nombre }}</span>
    <div class="file-actions">
      <a href="#" onclick="downloadFile('{{ File.nombre }}')">
          Descargar
      </a>
      <div class="reaction-buttons">
        <button class="reaction-btn like-btn" onclick="reactToFile('{{ File.nombre }}', 'likes')">👍 <span class="like-count">{{ File.likes }}</span></button>
        <button class="reaction-btn dislike-btn" onclick="reactToFile('{{ File.nombre }}', 'dislikes')">💩 <span class="dislike-count">{{ File.dislikes }}</span></button>
        <button class="reaction-btn love-btn" onclick="reactToFile('{{ File.nombre }}', 'love')">❤️ <span class="love-count">{{ File.love|default(0) }}</span></button>
        <button class="reaction-btn laugh-btn" onclick="reactToFile('{{ File.nombre }}', 'laugh')">😂 <span class="laugh-count">{{ File.laugh|default(0) }}</span></button>
      </div>
    </div>
  </div>
  {% endfor %}
</section>

<script>
  function reactToFile(fileName, reaction) {
    fetch(`/react/${fileName}/${reaction}`, { method: 'POST' })
      .then(response => response.json())
      .then(data => {
        location.reload(); // Recargar la página después de la reacción
      })
      .catch(error => console.error('Error:', error));
  }
</script>

{% endblock %}
